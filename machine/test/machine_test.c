/*----------------------------------------------------------------------------
Copyright (c) 2013 Gauthier Fleutot Ã–stervall
----------------------------------------------------------------------------*/
// Module under test.
#include "../machine.h"

#include <assert.h>
#include <stdbool.h>
#include <stdio.h>

//******************************************************************************
// Module constants
//******************************************************************************

//******************************************************************************
// Module variables
//******************************************************************************

//******************************************************************************
// Function prototypes
//******************************************************************************
static void test_machine_init();


//******************************************************************************
// Function definitions
//******************************************************************************
int main(void)
{
    test_machine_init();
    printf("All tests passed.\n");
}


//******************************************************************************
// Internal functions
//******************************************************************************
static void test_machine_init()
{
    register_value_t data[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
                               15,16, 17};

    bool init_result;

    init_result = machine_init(data, NB_REGISTERS + 1);
    assert(init_result == false);

    init_result = machine_init(data, NB_REGISTERS);
    assert(init_result == true);

    assert(machine_result_get() == data[0]);
}
